<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TreeScribe Interactive Demo - All Features Showcase</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .demo-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .demo-header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .demo-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .demo-header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .demo-controls {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group label {
            font-weight: 500;
            color: #495057;
        }

        select, button, input {
            padding: 8px 16px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-size: 14px;
            background: white;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .demo-content {
            display: flex;
            min-height: 70vh;
        }

        .demo-sidebar {
            width: 300px;
            background: #f8f9fa;
            border-right: 1px solid #e9ecef;
            padding: 20px;
            overflow-y: auto;
        }

        .demo-main {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .tree-container {
            flex: 1;
            padding: 20px;
            overflow: auto;
        }

        .demo-footer {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .example-item {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .example-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .example-item.active {
            border-color: #667eea;
            background: #f0f2ff;
        }

        .example-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .example-description {
            font-size: 14px;
            color: #6c757d;
            line-height: 1.4;
        }

        .status-bar {
            background: #e9ecef;
            padding: 10px 20px;
            font-size: 14px;
            color: #495057;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .loading {
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid #e9ecef;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            color: #dc3545;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 15px;
            border-radius: 6px;
            margin: 20px;
        }

        /* TreeScribe Styles */
        .tree-scribe-container {
            height: 100%;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: white;
        }

        .tree-scribe-header {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .tree-scribe-search input {
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            width: 200px;
        }

        .tree-scribe-controls {
            display: flex;
            gap: 10px;
        }

        .tree-scribe-controls button {
            padding: 6px 12px;
            font-size: 13px;
        }

        .tree-scribe-content {
            padding: 20px;
            overflow: auto;
            max-height: calc(100% - 80px);
        }

        .tree-node {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            background: #f8f9fa;
        }

        .node-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .node-content {
            color: #495057;
            line-height: 1.6;
        }

        .tree-node.expanded {
            background: white;
        }

        .tree-node.collapsed {
            background: #f8f9fa;
        }

        .search-highlight {
            background: #fff3cd !important;
            border-color: #ffc107 !important;
        }

        mark {
            background: #ffeb3b;
            padding: 2px 4px;
            border-radius: 2px;
        }

        @media (max-width: 768px) {
            .demo-content {
                flex-direction: column;
            }

            .demo-sidebar {
                width: 100%;
                max-height: 200px;
            }

            .demo-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .control-group {
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <header class="demo-header">
            <h1>üå≥ TreeScribe Interactive Demo</h1>
            <p>
                Explore the complete feature set of TreeScribe with interactive examples.
                Load different documents, test search functionality, try folding operations,
                and experience the full power of hierarchical document viewing.
            </p>
        </header>

        <div class="demo-controls">
            <div class="control-group">
                <label for="theme-select">Theme:</label>
                <select id="theme-select">
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                </select>
            </div>

            <div class="control-group">
                <label for="search-input">Global Search:</label>
                <input type="text" id="search-input" placeholder="Search across documents...">
            </div>

            <div class="control-group">
                <button id="expand-all-btn">Expand All</button>
                <button id="collapse-all-btn">Collapse All</button>
            </div>

            <div class="control-group">
                <button id="export-html-btn">Export HTML</button>
                <button id="export-json-btn">Export JSON</button>
            </div>

            <div class="control-group">
                <label for="file-input">Load File:</label>
                <input type="file" id="file-input" accept=".yaml,.yml,.txt">
            </div>
        </div>

        <div class="demo-content">
            <aside class="demo-sidebar">
                <h3 style="margin-bottom: 20px; color: #2c3e50;">Example Documents</h3>
                
                <div class="example-item active" data-example="simple-guide">
                    <div class="example-title">üìò Quick Start Guide</div>
                    <div class="example-description">
                        Complete introduction to TreeScribe with examples, features,
                        and best practices. Perfect for learning the basics.
                    </div>
                </div>

                <div class="example-item" data-example="complex-structure">
                    <div class="example-title">üè¢ Enterprise Architecture</div>
                    <div class="example-description">
                        Deep, complex document structure showcasing advanced folding,
                        multiple content types, and performance with large documents.
                    </div>
                </div>

                <div class="example-item" data-example="custom-content">
                    <div class="example-title">üé® Custom Renderers</div>
                    <div class="example-description">
                        Demonstration of custom content renderers including code
                        highlighting, data visualization, and interactive tables.
                    </div>
                </div>

                <div class="example-item" data-example="markdown-showcase">
                    <div class="example-title">üìù Markdown Features</div>
                    <div class="example-description">
                        Comprehensive Markdown rendering showcase with syntax
                        highlighting, tables, links, and rich formatting.
                    </div>
                </div>

                <div class="example-item" data-example="data-structures">
                    <div class="example-title">üìä Data Structures</div>
                    <div class="example-description">
                        YAML data structures, nested objects, arrays, and various
                        data types with proper visualization.
                    </div>
                </div>

                <div class="example-item" data-example="accessibility-demo">
                    <div class="example-title">‚ôø Accessibility Demo</div>
                    <div class="example-description">
                        Keyboard navigation, screen reader support, and accessibility
                        features demonstration.
                    </div>
                </div>
            </aside>

            <main class="demo-main">
                <div class="tree-container" id="tree-container">
                    <!-- TreeScribe will be rendered here -->
                </div>
                
                <div class="status-bar">
                    <div class="status-info">
                        <span id="node-count">0 nodes</span> ‚Ä¢ 
                        <span id="search-results">0 search results</span> ‚Ä¢ 
                        <span id="load-time">0ms load time</span>
                    </div>
                    <div class="loading" id="loading-indicator" style="display: none;">
                        <div class="spinner"></div>
                        <span>Loading...</span>
                    </div>
                </div>
            </main>
        </div>

        <footer class="demo-footer">
            <p>
                TreeScribe Demo ‚Ä¢ Built with the Umbilical Component Protocol ‚Ä¢ 
                <a href="https://github.com/your-org/treescribe" style="color: #74b9ff;">
                    View on GitHub
                </a>
            </p>
        </footer>
    </div>

    <script type="module">
        // Example YAML documents
        const examples = {
            'simple-guide': '/examples/tree-scribe/simple-guide.yaml',
            'complex-structure': '/examples/tree-scribe/complex-structure.yaml',
            'custom-content': `
title: Custom Content Renderers Demo
content: |
  # Custom Renderer Showcase
  
  This document demonstrates TreeScribe's extensibility with custom content renderers.
  Each section below uses a different renderer to display specialized content.

children:
  - title: Code Syntax Highlighting
    content:
      language: javascript
      code: |
        // Advanced JavaScript Example
        class TreeScribePlugin {
          constructor(options = {}) {
            this.name = options.name || 'plugin';
            this.version = options.version || '1.0.0';
            this.callbacks = new Map();
          }
          
          on(event, callback) {
            if (!this.callbacks.has(event)) {
              this.callbacks.set(event, []);
            }
            this.callbacks.get(event).push(callback);
            
            return () => {
              const callbacks = this.callbacks.get(event);
              const index = callbacks.indexOf(callback);
              if (index > -1) callbacks.splice(index, 1);
            };
          }
          
          emit(event, data) {
            const callbacks = this.callbacks.get(event);
            if (callbacks) {
              callbacks.forEach(cb => {
                try {
                  cb(data);
                } catch (error) {
                  console.error('Plugin callback error:', error);
                }
              });
            }
          }
          
          async initialize() {
            console.log(\`Initializing \${this.name} v\${this.version}\`);
            this.emit('initialized', { plugin: this.name });
          }
        }
        
        // Usage example
        const plugin = new TreeScribePlugin({
          name: 'CustomRenderer',
          version: '2.1.0'
        });
        
        plugin.on('initialized', (data) => {
          console.log('Plugin ready:', data.plugin);
        });
        
        await plugin.initialize();
    type: code-highlight
    
  - title: Data Visualization
    content:
      type: bar
      title: TreeScribe Usage Statistics
      values: [45, 67, 89, 123, 156, 178]
      labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"]
      colors: ["#FF6B6B", "#4ECDC4", "#45B7D1", "#96CEB4", "#FFEAA7", "#DDA0DD"]
      width: 500
      height: 300
    type: data-visualization
    
  - title: Interactive Data Table
    content:
      columns:
        - { field: "name", title: "Component Name" }
        - { field: "type", title: "Type" }
        - { field: "size", title: "Bundle Size" }
        - { field: "performance", title: "Performance Score" }
        - { field: "compatibility", title: "Browser Support" }
      rows:
        - { name: "TreeScribe Core", type: "Component", size: "45.2 KB", performance: "98/100", compatibility: "Chrome 80+" }
        - { name: "Markdown Renderer", type: "Renderer", size: "12.8 KB", performance: "95/100", compatibility: "Chrome 70+" }
        - { name: "YAML Renderer", type: "Renderer", size: "8.4 KB", performance: "97/100", compatibility: "Chrome 75+" }
        - { name: "Search Engine", type: "Feature", size: "18.6 KB", performance: "93/100", compatibility: "Chrome 80+" }
        - { name: "Virtual Scroll", type: "Feature", size: "9.2 KB", performance: "96/100", compatibility: "Chrome 85+" }
        - { name: "Accessibility", type: "Feature", size: "14.1 KB", performance: "94/100", compatibility: "Chrome 70+" }
      showControls: true
    type: interactive-table
    
  - title: Performance Metrics
    content:
      type: line
      title: Load Time Performance (ms)
      values: [125, 98, 87, 76, 65, 58, 52, 48, 45, 42]
      labels: ["100", "250", "500", "750", "1K", "1.5K", "2K", "2.5K", "3K", "3.5K"]
      color: "#007bff"
      width: 600
      height: 250
    type: data-visualization
`,
            'markdown-showcase': `
title: Markdown Feature Showcase
content: |
  # Comprehensive Markdown Demonstration
  
  This document showcases all supported Markdown features in TreeScribe,
  from basic formatting to advanced features like tables and code blocks.

type: markdown

children:
  - title: Basic Formatting
    content: |
      ## Text Formatting Examples
      
      Here are the basic text formatting options available:
      
      **Bold text** using double asterisks or __double underscores__
      
      *Italic text* using single asterisks or _single underscores_
      
      ***Bold and italic*** using triple asterisks
      
      ~~Strikethrough text~~ using double tildes
      
      You can also use \`inline code\` with backticks for highlighting code snippets.
      
      > This is a blockquote. It can span multiple lines
      > and is perfect for highlighting important information
      > or quoting external sources.
      
      ### Lists
      
      **Unordered Lists:**
      - First item
      - Second item
        - Nested item
        - Another nested item
      - Third item
      
      **Ordered Lists:**
      1. First step
      2. Second step
         1. Sub-step
         2. Another sub-step
      3. Third step
      
      **Task Lists:**
      - [x] Completed task
      - [ ] Incomplete task
      - [x] Another completed task
    type: markdown
    
  - title: Links and Images
    content: |
      ## Links and Media
      
      ### Links
      - [External link](https://example.com)
      - [Link with title](https://example.com "This is a title")
      - <https://autolink.example.com>
      - [Reference-style link][ref1]
      
      ### Email Links
      - <email@example.com>
      - [Send email](mailto:contact@example.com)
      
      ### Images
      ![Alt text](https://via.placeholder.com/300x200/667eea/ffffff?text=TreeScribe)
      
      ![Image with title](https://via.placeholder.com/400x150/764ba2/ffffff?text=Markdown+Demo "Markdown Demo Image")
      
      ### Reference Links
      [ref1]: https://example.com "Reference link title"
    type: markdown
    
  - title: Tables and Code
    content: |
      ## Tables
      
      | Feature | Support | Notes |
      |---------|---------|-------|
      | Basic formatting | ‚úÖ | Bold, italic, strikethrough |
      | Links | ‚úÖ | Internal and external |
      | Images | ‚úÖ | With alt text and titles |
      | Tables | ‚úÖ | With alignment support |
      | Code blocks | ‚úÖ | Syntax highlighting |
      | Lists | ‚úÖ | Ordered, unordered, tasks |
      | Blockquotes | ‚úÖ | Multi-line support |
      | Horizontal rules | ‚úÖ | See below |
      
      ### Aligned Tables
      
      | Left Aligned | Center Aligned | Right Aligned |
      |:-------------|:--------------:|--------------:|
      | Left | Center | Right |
      | Text | Text | Text |
      | More | More | More |
      
      ---
      
      ## Code Blocks
      
      ### JavaScript Example
      \`\`\`javascript
      async function loadTreeScribe(container, options = {}) {
        const { TreeScribe } = await import('./treescribe/index.js');
        
        const instance = TreeScribe.create({
          dom: container,
          theme: options.theme || 'light',
          enableSearch: options.enableSearch !== false,
          onMount: (tree) => {
            console.log('TreeScribe mounted successfully');
          }
        });
        
        if (options.yamlContent) {
          await instance.loadYaml(options.yamlContent);
        }
        
        return instance;
      }
      \`\`\`
      
      ### Python Example
      \`\`\`python
      class DocumentProcessor:
          def __init__(self, format_type="yaml"):
              self.format_type = format_type
              self.processors = {
                  'yaml': self._process_yaml,
                  'json': self._process_json,
                  'markdown': self._process_markdown
              }
          
          def process(self, content):
              processor = self.processors.get(self.format_type)
              if not processor:
                  raise ValueError(f"Unsupported format: {self.format_type}")
              
              return processor(content)
          
          def _process_yaml(self, content):
              import yaml
              return yaml.safe_load(content)
      \`\`\`
      
      ### CSS Example
      \`\`\`css
      .tree-scribe-container {
        display: flex;
        flex-direction: column;
        height: 100%;
        border: 1px solid #e1e5e9;
        border-radius: 8px;
        background: white;
      }
      
      .tree-node {
        padding: 12px 16px;
        border-bottom: 1px solid #f1f3f4;
        transition: background-color 0.2s ease;
      }
      
      .tree-node:hover {
        background-color: #f8f9fa;
      }
      
      .tree-node.expanded > .node-children {
        display: block;
      }
      
      .tree-node.collapsed > .node-children {
        display: none;
      }
      \`\`\`
    type: markdown
    
  - title: Advanced Features
    content: |
      ## Advanced Markdown Features
      
      ### Mathematical Expressions
      
      Inline math: The formula $E = mc^2$ is famous.
      
      Block math:
      $$
      \\int_{-\\infty}^{\\infty} e^{-x^2} dx = \\sqrt{\\pi}
      $$
      
      ### Footnotes
      
      This text has a footnote[^1].
      
      You can also use named footnotes[^note].
      
      [^1]: This is the first footnote.
      [^note]: This is a named footnote.
      
      ### Definition Lists
      
      Term 1
      :   Definition 1
      
      Term 2
      :   Definition 2a
      :   Definition 2b
      
      ### Abbreviations
      
      The HTML specification is maintained by the W3C.
      
      *[HTML]: Hypertext Markup Language
      *[W3C]: World Wide Web Consortium
      
      ### Keyboard Keys
      
      Press \`Ctrl+C\` to copy and \`Ctrl+V\` to paste.
      
      Use \`Ctrl+Shift+P\` to open the command palette.
      
      ### Emojis and Special Characters
      
      TreeScribe supports emojis! üå≥üìÑüîç‚ú®
      
      Special characters: ¬© ¬Æ ‚Ñ¢ ¬ß ¬∂ ‚Ä† ‚Ä° ‚Ä¢ ‚Ä¶ ‚Ä∞ ‚Ä≤ ‚Ä≥ ‚Äπ ‚Ä∫ ¬´ ¬ª ‚Äö ‚Äû " " ' '
      
      ### Horizontal Rules
      
      You can create horizontal rules with three or more hyphens, asterisks, or underscores:
      
      ---
      
      ***
      
      ___
    type: markdown
`,
            'data-structures': `
title: YAML Data Structures Showcase
content: |
  # YAML Data Structure Examples
  
  This document demonstrates how TreeScribe handles various YAML data structures,
  from simple key-value pairs to complex nested objects and arrays.

children:
  - title: Basic Data Types
    content:
      string_value: "This is a string"
      number_value: 42
      float_value: 3.14159
      boolean_value: true
      null_value: null
      date_value: 2024-01-17
      timestamp_value: 2024-01-17T10:30:00Z
    type: yaml
    
  - title: Collections
    content:
      # Simple array
      fruits:
        - apple
        - banana
        - orange
        - grape
      
      # Array of objects
      users:
        - name: "John Doe"
          age: 30
          email: "john@example.com"
          active: true
        - name: "Jane Smith"
          age: 25
          email: "jane@example.com"
          active: false
        - name: "Bob Johnson"
          age: 35
          email: "bob@example.com"
          active: true
      
      # Nested object
      configuration:
        database:
          host: "localhost"
          port: 5432
          name: "myapp_db"
          ssl: true
          pool:
            min: 5
            max: 20
            idle_timeout: "30s"
        
        cache:
          type: "redis"
          host: "redis.example.com"
          port: 6379
          ttl: 3600
          
        logging:
          level: "info"
          format: "json"
          outputs:
            - type: "console"
            - type: "file"
              path: "/var/log/app.log"
              max_size: "100MB"
              max_files: 5
    type: yaml
    
  - title: Complex Nested Structure
    content:
      # E-commerce product catalog
      catalog:
        categories:
          electronics:
            name: "Electronics"
            description: "Electronic devices and accessories"
            subcategories:
              computers:
                name: "Computers"
                products:
                  - id: "laptop-001"
                    name: "Gaming Laptop"
                    price: 1299.99
                    specs:
                      cpu: "Intel i7-12700H"
                      ram: "16GB DDR4"
                      storage: "512GB NVMe SSD"
                      gpu: "RTX 3060"
                    ratings:
                      average: 4.5
                      count: 127
                    tags: ["gaming", "portable", "high-performance"]
                  
                  - id: "desktop-001"
                    name: "Workstation Desktop"
                    price: 1899.99
                    specs:
                      cpu: "AMD Ryzen 9 5900X"
                      ram: "32GB DDR4"
                      storage: "1TB NVMe SSD"
                      gpu: "RTX 3070"
                    ratings:
                      average: 4.8
                      count: 89
                    tags: ["workstation", "powerful", "professional"]
              
              smartphones:
                name: "Smartphones"
                products:
                  - id: "phone-001"
                    name: "Premium Smartphone"
                    price: 999.99
                    specs:
                      screen: "6.7 inch OLED"
                      storage: "256GB"
                      camera: "108MP Triple Camera"
                      battery: "4500mAh"
                    ratings:
                      average: 4.3
                      count: 342
                    tags: ["flagship", "camera", "5g"]
          
          clothing:
            name: "Clothing"
            description: "Fashion and apparel"
            subcategories:
              mens:
                name: "Men's Clothing"
                products:
                  - id: "shirt-001"
                    name: "Classic Button Shirt"
                    price: 49.99
                    sizes: ["S", "M", "L", "XL", "XXL"]
                    colors: ["white", "blue", "black", "gray"]
                    materials: ["100% Cotton"]
                    care_instructions:
                      - "Machine wash cold"
                      - "Tumble dry low"
                      - "Iron on medium heat"
                    ratings:
                      average: 4.2
                      count: 156
                    tags: ["classic", "versatile", "cotton"]
    type: yaml
    
  - title: Configuration Examples
    content:
      # Application configuration
      app_config:
        name: "TreeScribe Demo App"
        version: "1.0.0"
        
        server:
          host: "0.0.0.0"
          port: 3000
          ssl:
            enabled: true
            cert_path: "/etc/ssl/certs/app.crt"
            key_path: "/etc/ssl/private/app.key"
          
          middleware:
            - name: "cors"
              options:
                origin: ["http://localhost:3000", "https://app.example.com"]
                credentials: true
            
            - name: "helmet"
              options:
                contentSecurityPolicy:
                  directives:
                    defaultSrc: ["'self'"]
                    styleSrc: ["'self'", "'unsafe-inline'"]
                    scriptSrc: ["'self'"]
                    imgSrc: ["'self'", "data:", "https:"]
            
            - name: "rateLimit"
              options:
                windowMs: 900000  # 15 minutes
                max: 100  # limit each IP to 100 requests per windowMs
        
        features:
          search:
            enabled: true
            provider: "elasticsearch"
            config:
              host: "elasticsearch.example.com"
              port: 9200
              index: "app-search"
              max_results: 50
          
          analytics:
            enabled: true
            providers:
              - name: "google-analytics"
                tracking_id: "GA-XXXXXXXXX"
              - name: "mixpanel"
                token: "your-mixpanel-token"
          
          notifications:
            enabled: true
            channels:
              email:
                provider: "sendgrid"
                api_key: "SG.xxx"
                from: "noreply@example.com"
              
              sms:
                provider: "twilio"
                account_sid: "ACxxx"
                auth_token: "xxx"
                from: "+1234567890"
              
              push:
                provider: "firebase"
                server_key: "firebase-server-key"
    type: yaml
    
  - title: Multi-line Strings
    content:
      # Different ways to handle multi-line strings
      examples:
        # Literal style (preserves newlines)
        literal_string: |
          This is a literal string.
          
          It preserves line breaks exactly as written.
          Even empty lines are preserved.
          
          Perfect for code, configuration files, or formatted text.
        
        # Folded style (folds newlines to spaces)
        folded_string: >
          This is a folded string.
          Line breaks are converted to spaces,
          making it perfect for long paragraphs
          that need to wrap nicely.
        
        # SQL query example
        database_query: |
          SELECT 
            u.id,
            u.name,
            u.email,
            p.title as profile_title,
            COUNT(o.id) as order_count
          FROM users u
          LEFT JOIN profiles p ON u.id = p.user_id
          LEFT JOIN orders o ON u.id = o.user_id
          WHERE u.active = true
            AND u.created_at >= '2024-01-01'
          GROUP BY u.id, u.name, u.email, p.title
          ORDER BY order_count DESC, u.name ASC
          LIMIT 100;
        
        # JavaScript code example  
        javascript_code: |
          class DataProcessor {
            constructor(options = {}) {
              this.options = {
                batchSize: 100,
                maxRetries: 3,
                timeout: 5000,
                ...options
              };
              
              this.queue = [];
              this.processing = false;
            }
            
            async process(data) {
              return new Promise((resolve, reject) => {
                this.queue.push({ data, resolve, reject });
                this.processQueue();
              });
            }
            
            async processQueue() {
              if (this.processing || this.queue.length === 0) {
                return;
              }
              
              this.processing = true;
              
              try {
                const batch = this.queue.splice(0, this.options.batchSize);
                const results = await this.processBatch(batch);
                
                batch.forEach((item, index) => {
                  item.resolve(results[index]);
                });
              } catch (error) {
                this.queue.forEach(item => item.reject(error));
              } finally {
                this.processing = false;
                
                if (this.queue.length > 0) {
                  setTimeout(() => this.processQueue(), 0);
                }
              }
            }
          }
    type: yaml

metadata:
  document_type: "data-showcase"
  complexity: "comprehensive"
  estimated_size: "large"
  content_types: ["yaml", "mixed"]
  features_demonstrated:
    - "nested_objects"
    - "arrays"
    - "multi_line_strings"
    - "various_data_types"
    - "real_world_examples"
`,
            'accessibility-demo': `
title: TreeScribe Accessibility Features Demo
content: |
  # Accessibility and Keyboard Navigation
  
  TreeScribe is designed to be fully accessible and supports comprehensive
  keyboard navigation, screen reader compatibility, and WCAG 2.1 AA compliance.
  
  **Try these keyboard shortcuts:**
  - Arrow keys: Navigate between nodes
  - Enter/Space: Expand/collapse nodes
  - Home/End: Jump to first/last node
  - / or Ctrl+F: Focus search
  - F3/Shift+F3: Navigate search results

children:
  - title: Keyboard Navigation
    content: |
      ## Complete Keyboard Support
      
      TreeScribe provides full keyboard navigation for users who prefer
      or require keyboard-only interaction.
      
      ### Primary Navigation
      - **‚Üë/‚Üì Arrow Keys**: Move between visible nodes
      - **‚Üê/‚Üí Arrow Keys**: Collapse/expand nodes or navigate to parent/child
      - **Home**: Jump to first visible node
      - **End**: Jump to last visible node
      - **Page Up/Page Down**: Scroll by page
      
      ### Node Interaction
      - **Enter**: Toggle node expansion
      - **Space**: Toggle node expansion (alternative)
      - **Tab**: Move to next interactive element
      - **Shift+Tab**: Move to previous interactive element
      
      ### Search Shortcuts
      - **/**: Focus search input
      - **Ctrl+F**: Focus search input (alternative)
      - **F3**: Navigate to next search result
      - **Shift+F3**: Navigate to previous search result
      - **Escape**: Clear search and return focus to tree
      
      ### Global Actions
      - **Ctrl+A**: Select all (if selection is enabled)
      - **Ctrl+C**: Copy selected content
      - **Ctrl+E**: Export document
      - *****: Expand all nodes
      - **-**: Collapse all nodes
    
    children:
      - title: Focus Management
        content: |
          ### Intelligent Focus Handling
          
          TreeScribe maintains proper focus throughout all interactions:
          
          - **Visible Focus Indicators**: Clear visual indication of focused elements
          - **Focus Trap**: Focus stays within the component when appropriate
          - **Focus Restoration**: Returns focus to logical location after actions
          - **Skip Links**: Allows jumping to main content areas
          
          The focus order follows a logical sequence:
          1. Search input (if present)
          2. Control buttons (expand all, collapse all, etc.)
          3. Tree nodes (in document order)
          4. Export/action buttons
        
      - title: Screen Reader Support
        content: |
          ### ARIA Implementation
          
          Full ARIA (Accessible Rich Internet Applications) support:
          
          - **role="tree"**: Main container identified as tree structure
          - **role="treeitem"**: Each node properly identified
          - **aria-expanded**: Indicates expansion state of nodes
          - **aria-level**: Indicates nesting level of each node
          - **aria-setsize**: Indicates total number of sibling nodes
          - **aria-posinset**: Indicates position within sibling group
          - **aria-describedby**: Links nodes to their content descriptions
          - **aria-label/aria-labelledby**: Provides accessible names
          
          ### Live Regions
          
          Dynamic content changes are announced to screen readers:
          
          - **Search Results**: "5 results found for 'javascript'"
          - **Node Actions**: "Node expanded" or "Node collapsed"
          - **Navigation**: "Moved to Getting Started section"
          - **Errors**: "Error loading document: Invalid YAML format"
  
  - title: Visual Accessibility
    content: |
      ## Visual Design for Accessibility
      
      TreeScribe follows accessibility best practices for visual design.
    
    children:
      - title: Color and Contrast
        content: |
          ### WCAG AA Compliant Colors
          
          All color combinations meet WCAG 2.1 AA contrast requirements:
          
          - **Text on Background**: Minimum 4.5:1 contrast ratio
          - **Large Text**: Minimum 3:1 contrast ratio  
          - **Interactive Elements**: Clear visual distinction
          - **Focus Indicators**: High contrast outlines (minimum 3:1)
          
          ### Color Independence
          
          Information is never conveyed through color alone:
          
          - **Status Indicators**: Icons + color + text
          - **Search Highlights**: Background + border + bold text
          - **Node States**: Icons + indentation + text labels
          - **Error States**: Icons + color + descriptive text
        
      - title: Typography and Spacing
        content: |
          ### Readable Typography
          
          - **Font Size**: Minimum 16px for body text
          - **Line Height**: 1.5 for optimal readability
          - **Font Family**: System fonts for best OS integration
          - **Font Weight**: Appropriate contrast between headings and body
          
          ### Generous Spacing
          
          - **Touch Targets**: Minimum 44px √ó 44px for interactive elements
          - **Node Spacing**: Clear separation between tree items
          - **Content Padding**: Adequate whitespace around text
          - **Focus Outlines**: Sufficient space around focus indicators
        
      - title: Responsive Design
        content: |
          ### Mobile Accessibility
          
          TreeScribe adapts to different screen sizes while maintaining accessibility:
          
          - **Touch Targets**: Enlarged for mobile devices
          - **Gesture Support**: Swipe to expand/collapse (with fallbacks)
          - **Orientation Support**: Works in portrait and landscape
          - **Zoom Support**: Scales properly up to 200% zoom
          
          ### Reduced Motion
          
          Respects user's motion preferences:
          
          ```css
          @media (prefers-reduced-motion: reduce) {
            .tree-node {
              transition: none;
            }
            
            .search-highlight {
              animation: none;
            }
          }
          ```
  
  - title: Assistive Technology Support
    content: |
      ## Comprehensive AT Support
      
      TreeScribe works with all major assistive technologies.
    
    children:
      - title: Screen Readers
        content: |
          ### Tested Compatibility
          
          TreeScribe has been tested with:
          
          - **NVDA** (Windows): Full compatibility
          - **JAWS** (Windows): Full compatibility  
          - **VoiceOver** (macOS/iOS): Full compatibility
          - **TalkBack** (Android): Full compatibility
          - **Orca** (Linux): Full compatibility
          
          ### Announcement Patterns
          
          Screen readers announce information in logical order:
          
          1. **Node Title**: "Getting Started, button, collapsed, level 2 of 6"
          2. **Content Preview**: First line of content when focused
          3. **Navigation**: "Moved to item 3 of 8"
          4. **State Changes**: "Expanded" or "Collapsed"
          5. **Search Results**: "Result 2 of 5: JavaScript example"
        
      - title: Voice Control
        content: |
          ### Voice Command Support
          
          Works with voice control software:
          
          - **Dragon NaturallySpeaking**: All interactive elements labeled
          - **Windows Speech Recognition**: Full command support
          - **Voice Control (macOS)**: Proper element naming
          - **Voice Access (Android)**: Touch target labels
          
          ### Voice-Friendly Labels
          
          All interactive elements have clear, pronounceable labels:
          
          - "Expand Getting Started section"
          - "Search documents"
          - "Export as HTML"
          - "Navigate to next result"
        
      - title: Switch Navigation
        content: |
          ### Switch Access Support
          
          For users with motor disabilities using switch devices:
          
          - **Sequential Navigation**: Tab order follows logical flow
          - **Skip Navigation**: Quick jumps to main content areas
          - **Action Grouping**: Related actions grouped together
          - **Confirmation Dialogs**: Clear action/cancel options
          
          ### Timing Considerations
          
          - **No Time Limits**: Users can take as long as needed
          - **Pause Options**: Auto-scrolling can be paused
          - **Timeout Warnings**: If timeouts exist, users are warned
          - **Extension Options**: Ability to extend time limits
  
  - title: Customization Options
    content: |
      ## Accessibility Customization
      
      TreeScribe provides options to customize the accessibility experience.
    
    children:
      - title: User Preferences
        content: |
          ### Configurable Options
          
          Users can customize their experience:
          
          ```javascript
          const treeScribe = TreeScribe.create({
            dom: container,
            accessibility: {
              announcements: true,          // Enable/disable announcements
              verbosity: 'normal',          // 'minimal', 'normal', 'verbose'
              navigation: 'arrows',         // 'arrows', 'tab', 'both'
              focusTrap: true,             // Enable focus trapping
              skipLinks: true,             // Show skip navigation links
              highContrast: 'auto',        // 'auto', 'on', 'off'
              reduceMotion: 'respect'      // 'respect', 'ignore', 'force'
            }
          });
          ```
        
      - title: Theme Support
        content: |
          ### Accessible Themes
          
          All themes meet accessibility requirements:
          
          - **Light Theme**: High contrast, easy on the eyes
          - **Dark Theme**: Reduces eye strain, maintains contrast
          - **High Contrast**: Maximum contrast for low vision users
          - **Custom Themes**: Must pass accessibility validation
          
          ### System Integration
          
          Respects system preferences:
          
          - **Prefers Color Scheme**: Automatically matches OS theme
          - **Prefers Contrast**: Switches to high contrast when requested
          - **Prefers Reduced Motion**: Disables animations
          - **Font Size**: Scales with system font size settings
        
      - title: Developer APIs
        content: |
          ### Accessibility Events
          
          Developers can listen to accessibility events:
          
          ```javascript
          treeScribe.on('accessibility.focus', (event) => {
            console.log('Focus moved to:', event.nodeId);
          });
          
          treeScribe.on('accessibility.announcement', (event) => {
            console.log('Announced:', event.message);
          });
          
          treeScribe.on('accessibility.navigation', (event) => {
            console.log('Navigation:', event.from, 'to', event.to);
          });
          ```
          
          ### Custom Announcements
          
          Add custom accessibility announcements:
          
          ```javascript
          treeScribe.announce('Custom operation completed', 'polite');
          treeScribe.announce('Error occurred', 'assertive');
          ```

metadata:
  accessibility_level: "WCAG 2.1 AA"
  tested_with: ["NVDA", "JAWS", "VoiceOver", "TalkBack", "Dragon"]
  keyboard_support: "full"
  screen_reader_support: "comprehensive"
  assistive_technology: "all_major_platforms"
  last_audit: "2024-01-17"
`
        };

        let currentTreeScribe = null;
        let currentExample = 'simple-guide';

        // Initialize demo
        async function initDemo() {
            try {
                showLoading(true);
                
                // For now, we'll create a mock TreeScribe instance
                // In a real implementation, this would import the actual TreeScribe component
                currentTreeScribe = createMockTreeScribe();
                
                // Load initial example
                await loadExample('simple-guide');
                
                setupEventListeners();
                updateStatusBar({ nodeCount: 0, searchResults: 0, loadTime: 0 });
                
            } catch (error) {
                showError('Failed to initialize TreeScribe demo: ' + error.message);
            } finally {
                showLoading(false);
            }
        }

        // Create mock TreeScribe for demo purposes
        function createMockTreeScribe() {
            return {
                async loadYaml(content) {
                    const startTime = Date.now();
                    
                    // Simulate loading time
                    await new Promise(resolve => setTimeout(resolve, 200 + Math.random() * 300));
                    
                    // Parse YAML content (simplified)
                    const data = typeof content === 'string' ? parseSimpleYaml(content) : content;
                    
                    // Render tree
                    renderTree(data);
                    
                    const nodeCount = countNodes(data);
                    const loadTime = Date.now() - startTime;
                    
                    updateStatusBar({ nodeCount, loadTime });
                    
                    return { success: true, nodeCount };
                },
                
                search(query) {
                    const results = performSearch(query);
                    updateStatusBar({ searchResults: results.length });
                    highlightSearchResults(results);
                    return results;
                },
                
                expandAll() {
                    const nodes = document.querySelectorAll('.tree-node.collapsed');
                    nodes.forEach(node => {
                        node.classList.remove('collapsed');
                        node.classList.add('expanded');
                    });
                },
                
                collapseAll() {
                    const nodes = document.querySelectorAll('.tree-node.expanded');
                    nodes.forEach(node => {
                        node.classList.remove('expanded');
                        node.classList.add('collapsed');
                    });
                },
                
                exportHTML() {
                    return generateHTMLExport();
                },
                
                exportJSON() {
                    return generateJSONExport();
                },
                
                setTheme(theme) {
                    document.body.className = theme === 'dark' ? 'dark-theme' : '';
                },
                
                destroy() {
                    const container = document.getElementById('tree-container');
                    container.innerHTML = '';
                }
            };
        }

        // Setup event listeners
        function setupEventListeners() {
            // Example selection
            document.querySelectorAll('.example-item').forEach(item => {
                item.addEventListener('click', async () => {
                    const example = item.dataset.example;
                    if (example !== currentExample) {
                        // Update active state
                        document.querySelectorAll('.example-item').forEach(i => i.classList.remove('active'));
                        item.classList.add('active');
                        
                        await loadExample(example);
                        currentExample = example;
                    }
                });
            });

            // Theme selector
            document.getElementById('theme-select').addEventListener('change', (e) => {
                if (currentTreeScribe) {
                    currentTreeScribe.setTheme(e.target.value);
                }
            });

            // Global search
            let searchTimeout;
            document.getElementById('search-input').addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    if (currentTreeScribe && e.target.value) {
                        currentTreeScribe.search(e.target.value);
                    } else {
                        clearSearchHighlights();
                        updateStatusBar({ searchResults: 0 });
                    }
                }, 300);
            });

            // Control buttons
            document.getElementById('expand-all-btn').addEventListener('click', () => {
                if (currentTreeScribe) currentTreeScribe.expandAll();
            });

            document.getElementById('collapse-all-btn').addEventListener('click', () => {
                if (currentTreeScribe) currentTreeScribe.collapseAll();
            });

            document.getElementById('export-html-btn').addEventListener('click', () => {
                if (currentTreeScribe) {
                    const html = currentTreeScribe.exportHTML();
                    downloadFile('treescribe-export.html', html, 'text/html');
                }
            });

            document.getElementById('export-json-btn').addEventListener('click', () => {
                if (currentTreeScribe) {
                    const json = currentTreeScribe.exportJSON();
                    downloadFile('treescribe-export.json', json, 'application/json');
                }
            });

            // File input
            document.getElementById('file-input').addEventListener('change', async (e) => {
                const file = e.target.files[0];
                if (file && currentTreeScribe) {
                    try {
                        showLoading(true);
                        const content = await file.text();
                        await currentTreeScribe.loadYaml(content);
                    } catch (error) {
                        showError('Failed to load file: ' + error.message);
                    } finally {
                        showLoading(false);
                    }
                }
            });
        }

        // Load example
        async function loadExample(exampleName) {
            if (!currentTreeScribe) return;

            try {
                showLoading(true);
                
                let content = examples[exampleName];
                
                // If it's a URL, fetch it
                if (content && content.startsWith('/')) {
                    try {
                        const response = await fetch(content);
                        if (response.ok) {
                            content = await response.text();
                        }
                    } catch (e) {
                        console.warn('Failed to fetch example file, using inline content');
                    }
                }
                
                if (content) {
                    await currentTreeScribe.loadYaml(content);
                } else {
                    showError('Example not found: ' + exampleName);
                }
                
            } catch (error) {
                showError('Failed to load example: ' + error.message);
            } finally {
                showLoading(false);
            }
        }

        // Utility functions
        function showLoading(show) {
            const indicator = document.getElementById('loading-indicator');
            indicator.style.display = show ? 'flex' : 'none';
        }

        function showError(message) {
            const container = document.getElementById('tree-container');
            container.innerHTML = \`
                <div class="error-message">
                    <strong>Error:</strong> \${message}
                </div>
            \`;
        }

        function updateStatusBar(stats) {
            if (stats.nodeCount !== undefined) {
                document.getElementById('node-count').textContent = \`\${stats.nodeCount} nodes\`;
            }
            if (stats.searchResults !== undefined) {
                document.getElementById('search-results').textContent = \`\${stats.searchResults} search results\`;
            }
            if (stats.loadTime !== undefined) {
                document.getElementById('load-time').textContent = \`\${stats.loadTime}ms load time\`;
            }
        }

        function downloadFile(filename, content, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Simple YAML parser for demo
        function parseSimpleYaml(yamlContent) {
            // This is a very simplified YAML parser for demo purposes
            // In a real implementation, you'd use a proper YAML library
            
            try {
                // Try to parse as literal YAML first
                if (yamlContent.trim().startsWith('{')) {
                    return JSON.parse(yamlContent);
                }
                
                // Simple key-value parsing
                const lines = yamlContent.split('\\n');
                const result = { title: 'Document', children: [] };
                let current = result;
                let stack = [result];
                
                for (const line of lines) {
                    const trimmed = line.trim();
                    if (!trimmed || trimmed.startsWith('#')) continue;
                    
                    const indent = line.length - line.trimStart().length;
                    const [key, ...valueParts] = trimmed.split(':');
                    const value = valueParts.join(':').trim();
                    
                    if (key === 'title') {
                        current.title = value || key;
                    } else if (key === 'content') {
                        current.content = value || 'Content here...';
                    } else if (key === 'children') {
                        current.children = current.children || [];
                    } else if (trimmed.startsWith('- ')) {
                        const item = { title: trimmed.substring(2), content: 'Item content...' };
                        current.children = current.children || [];
                        current.children.push(item);
                    }
                }
                
                return result;
            } catch (error) {
                return {
                    title: 'Parse Error',
                    content: 'Failed to parse YAML content: ' + error.message,
                    children: []
                };
            }
        }

        // Render tree (simplified)
        function renderTree(data) {
            const container = document.getElementById('tree-container');
            
            const treeHtml = \`
                <div class="tree-scribe-container">
                    <div class="tree-scribe-header">
                        <div class="tree-scribe-search">
                            <input type="text" placeholder="Search in document..." />
                        </div>
                        <div class="tree-scribe-controls">
                            <button onclick="toggleAll('expand')">Expand All</button>
                            <button onclick="toggleAll('collapse')">Collapse All</button>
                        </div>
                    </div>
                    <div class="tree-scribe-content">
                        \${renderNode(data, 0)}
                    </div>
                </div>
            \`;
            
            container.innerHTML = treeHtml;
            
            // Add click handlers
            container.querySelectorAll('.node-title').forEach(title => {
                title.addEventListener('click', (e) => {
                    const node = e.target.closest('.tree-node');
                    node.classList.toggle('expanded');
                    node.classList.toggle('collapsed');
                });
            });
        }

        function renderNode(node, depth) {
            const hasChildren = node.children && node.children.length > 0;
            const childrenHtml = hasChildren 
                ? node.children.map(child => renderNode(child, depth + 1)).join('')
                : '';
            
            return \`
                <div class="tree-node \${hasChildren ? 'expanded' : 'leaf'}" style="margin-left: \${depth * 20}px">
                    <div class="node-title">\${node.title || 'Untitled'}</div>
                    \${node.content ? \`<div class="node-content">\${node.content}</div>\` : ''}
                    \${childrenHtml}
                </div>
            \`;
        }

        function countNodes(data) {
            let count = 1;
            if (data.children) {
                count += data.children.reduce((sum, child) => sum + countNodes(child), 0);
            }
            return count;
        }

        function performSearch(query) {
            const nodes = document.querySelectorAll('.tree-node');
            const results = [];
            
            nodes.forEach((node, index) => {
                const text = node.textContent.toLowerCase();
                if (text.includes(query.toLowerCase())) {
                    results.push({ node, index, query });
                }
            });
            
            return results;
        }

        function highlightSearchResults(results) {
            clearSearchHighlights();
            
            results.forEach(result => {
                result.node.classList.add('search-highlight');
            });
        }

        function clearSearchHighlights() {
            document.querySelectorAll('.search-highlight').forEach(node => {
                node.classList.remove('search-highlight');
            });
        }

        function generateHTMLExport() {
            const container = document.getElementById('tree-container');
            return \`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>TreeScribe Export</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .tree-node { margin: 10px 0; padding: 10px; border-left: 3px solid #ddd; }
                        .node-title { font-weight: bold; margin-bottom: 5px; }
                        .node-content { color: #666; }
                    </style>
                </head>
                <body>
                    <h1>TreeScribe Document Export</h1>
                    \${container.innerHTML}
                </body>
                </html>
            \`;
        }

        function generateJSONExport() {
            // This would extract the current document structure
            return JSON.stringify({
                title: "TreeScribe Export",
                exported_at: new Date().toISOString(),
                content: "Document exported from TreeScribe interactive demo"
            }, null, 2);
        }

        // Global functions for demo
        window.toggleAll = function(action) {
            if (currentTreeScribe) {
                if (action === 'expand') {
                    currentTreeScribe.expandAll();
                } else {
                    currentTreeScribe.collapseAll();
                }
            }
        };

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initDemo);
    </script>
</body>
</html>